<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="../css/product.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <div class="container">

      <aside class="sidebar">

          <div class="logo">
            <img src="/assets/SoFlow.svg" alt="Logo">
          </div>

        <nav>
            <a href="/pages/dashboard.html"><i class="fas fa-chart-line"></i> Dashboard</a>
            <a href="/pages/Products.html" class="active"><i class="fas fa-box"></i>Products</a>
            <a href="/pages/adjustment.html"><i class="fas fa-sliders-h"></i> Adjustments</a>
            <a href="/pages/purhcases.html"><i class="fas fa-shopping-cart"></i> Purchases</a>
            <a href="/pages/sales.html"><i class="fas fa-file-invoice-dollar"></i> Sales</a>
        </nav>

        <div class="logout-container">
            <a href="../pages/landing.html" class="logout-btn" onclick="return confirm('Are you sure you want to logout?')">
                <i class="fas fa-sign-out-alt"></i>Log Out</a>
        </div>

      </aside>

        <main class="main">

          <section class="top-cards">
            <div class="rev-card"><p>Revenue<br><strong id="revenueValue">$0.00</strong></p></div>
            <!-- <div class="card"><p>Purchases<br><strong id="purchasesValue">$0.00</strong></p></div> -->
            <!-- <div class="card"><p>Sales Return<br><strong id="salesReturnValue">$0.00</strong></p></div> -->
            <!-- <div class="card"><p>Profit<br><strong id="profitValue">$0.00</strong></p></div> -->
          </section>

          <section class="products">
            <button class="add-btn" id="addBtn">Add a Product</button>

            <!-- <button type="submit">Search</button>
            <input type="text" id="searchInput" placeholder="Search products..." /> -->
            
            <div class="product-grid"></div>
          </section>

          

        </main>

        <!-- modal -->
        <div id="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Add Product</h3>
            <form>
              <label>Name:</label><br>
              <input type="text" name="name"><br><br>
              <label>Price:</label><br>
              <input type="number" name="price"><br><br>
              <label>Quantity:</label><br>
              <input type="number" name="quantity"></label><br><br>
              <label>Image URL:</label><br>
              <input type="text" name="image"></label><br><br>
              <button type="submit">Submit</button>
            </form>
          </div>
        </div>

    </div>

    <script src="../js/addCard.js"></script>

    <script>
      // Fetch products and update top cards
      function updateTopCards() {
        fetch('/api/products/')
          .then(res => res.json())
          .then(products => {
            let totalRevenue = products.reduce((sum, p) => sum + (p.revenue || 0), 0);
            // let purchases = products.reduce((sum, p) => sum + (p.price * p.quantity), 0);
            // let profit = totalRevenue - purchases;

            document.getElementById('revenueValue').textContent = `$${totalRevenue.toFixed(2)}`;
            // document.getElementById('purchasesValue').textContent = `$${purchases.toFixed(2)}`;
            // document.getElementById('profitValue').textContent = `$${profit.toFixed(2)}`;
          });
      }

      updateTopCards();
    </script>
</body>
</html>